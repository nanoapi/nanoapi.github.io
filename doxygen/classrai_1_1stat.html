<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RaiBlocks: rai::stat Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RaiBlocks
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>rai</b></li><li class="navelem"><a class="el" href="classrai_1_1stat.html">stat</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classrai_1_1stat-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">rai::stat Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Collects counts and samples for inbound and outbound traffic, blocks, errors, and so on.  
 <a href="classrai_1_1stat.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="stats_8hpp_source.html">stats.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0"><td class="memItemLeft" align="right" valign="top"><a id="a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a> : uint8_t { <br />
&#160;&#160;<b>traffic</b>, 
<b>error</b>, 
<b>message</b>, 
<b>block</b>, 
<br />
&#160;&#160;<b>ledger</b>, 
<b>rollback</b>, 
<b>bootstrap</b>, 
<b>vote</b>, 
<br />
&#160;&#160;<b>peering</b>
<br />
 }</td></tr>
<tr class="memdesc:a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Primary statistics type. <br /></td></tr>
<tr class="separator:a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9358b94c987fffcb6e52f996035ea3c4"><td class="memItemLeft" align="right" valign="top"><a id="a9358b94c987fffcb6e52f996035ea3c4"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a> : uint8_t { <br />
&#160;&#160;<b>all</b> = 0, 
<b>bad_sender</b>, 
<b>insufficient_work</b>, 
<b>send</b>, 
<br />
&#160;&#160;<b>receive</b>, 
<b>open</b>, 
<b>change</b>, 
<b>state_block</b>, 
<br />
&#160;&#160;<b>keepalive</b>, 
<b>publish</b>, 
<b>republish_vote</b>, 
<b>confirm_req</b>, 
<br />
&#160;&#160;<b>confirm_ack</b>, 
<b>initiate</b>, 
<b>bulk_pull</b>, 
<b>bulk_push</b>, 
<br />
&#160;&#160;<b>bulk_pull_blocks</b>, 
<b>frontier_req</b>, 
<b>vote_valid</b>, 
<b>vote_replay</b>, 
<br />
&#160;&#160;<b>vote_invalid</b>, 
<b>handshake</b>
<br />
 }</td></tr>
<tr class="memdesc:a9358b94c987fffcb6e52f996035ea3c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional detail type. <br /></td></tr>
<tr class="separator:a9358b94c987fffcb6e52f996035ea3c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a213857cdb04c1739ea756f080f9edaf0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a> : uint8_t { <b>in</b>, 
<b>out</b>
 }</td></tr>
<tr class="memdesc:a213857cdb04c1739ea756f080f9edaf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Direction of the stat.  <a href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">More...</a><br /></td></tr>
<tr class="separator:a213857cdb04c1739ea756f080f9edaf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a477b99f0b6ff40ba56775929c6a99ca0"><td class="memItemLeft" align="right" valign="top"><a id="a477b99f0b6ff40ba56775929c6a99ca0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a477b99f0b6ff40ba56775929c6a99ca0">stat</a> ()</td></tr>
<tr class="memdesc:a477b99f0b6ff40ba56775929c6a99ca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor using the default config values. <br /></td></tr>
<tr class="separator:a477b99f0b6ff40ba56775929c6a99ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f170d53cfc3c96f374121bb5e124189"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a6f170d53cfc3c96f374121bb5e124189">stat</a> (<a class="el" href="classrai_1_1stat__config.html">rai::stat_config</a> config)</td></tr>
<tr class="memdesc:a6f170d53cfc3c96f374121bb5e124189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize stats with a config.  <a href="#a6f170d53cfc3c96f374121bb5e124189">More...</a><br /></td></tr>
<tr class="separator:a6f170d53cfc3c96f374121bb5e124189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bd9edb50492e5436578677cf74ddb4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a2bd9edb50492e5436578677cf74ddb4c">configure</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a> <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>, size_t interval, size_t capacity)</td></tr>
<tr class="memdesc:a2bd9edb50492e5436578677cf74ddb4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this to override the default sample interval and capacity, for a specific stat entry.  <a href="#a2bd9edb50492e5436578677cf74ddb4c">More...</a><br /></td></tr>
<tr class="separator:a2bd9edb50492e5436578677cf74ddb4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0cd0111fd8338add1210e2733a705e2"><td class="memItemLeft" align="right" valign="top"><a id="ae0cd0111fd8338add1210e2733a705e2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#ae0cd0111fd8338add1210e2733a705e2">disable_sampling</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a> <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>)</td></tr>
<tr class="memdesc:ae0cd0111fd8338add1210e2733a705e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables sampling for a given type/detail/dir combination. <br /></td></tr>
<tr class="separator:ae0cd0111fd8338add1210e2733a705e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450508133da1036a4cd169b716be3e40"><td class="memItemLeft" align="right" valign="top"><a id="a450508133da1036a4cd169b716be3e40"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a450508133da1036a4cd169b716be3e40">inc</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>=stat::dir::in)</td></tr>
<tr class="memdesc:a450508133da1036a4cd169b716be3e40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the given counter. <br /></td></tr>
<tr class="separator:a450508133da1036a4cd169b716be3e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50ef4e50af82a0f5094f7d81c55f4b9a"><td class="memItemLeft" align="right" valign="top"><a id="a50ef4e50af82a0f5094f7d81c55f4b9a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a50ef4e50af82a0f5094f7d81c55f4b9a">inc_detail_only</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a> <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>=stat::dir::in)</td></tr>
<tr class="memdesc:a50ef4e50af82a0f5094f7d81c55f4b9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the counter for , but doesn't update at the type level. <br /></td></tr>
<tr class="separator:a50ef4e50af82a0f5094f7d81c55f4b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0956402a3612906de42de0c691b8000"><td class="memItemLeft" align="right" valign="top"><a id="ac0956402a3612906de42de0c691b8000"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#ac0956402a3612906de42de0c691b8000">inc</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a> <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>=stat::dir::in)</td></tr>
<tr class="memdesc:ac0956402a3612906de42de0c691b8000"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the given counter. <br /></td></tr>
<tr class="separator:ac0956402a3612906de42de0c691b8000"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eca6e690f80f2f5c9832c84c1f9564d"><td class="memItemLeft" align="right" valign="top"><a id="a6eca6e690f80f2f5c9832c84c1f9564d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a6eca6e690f80f2f5c9832c84c1f9564d">add</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>, uint64_t value)</td></tr>
<tr class="memdesc:a6eca6e690f80f2f5c9832c84c1f9564d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds <code>value</code> to the given counter. <br /></td></tr>
<tr class="separator:a6eca6e690f80f2f5c9832c84c1f9564d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacba55860e7c76d6c54ffd43bb91986e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#aacba55860e7c76d6c54ffd43bb91986e">add</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a> <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>, uint64_t value, bool detail_only=false)</td></tr>
<tr class="memdesc:aacba55860e7c76d6c54ffd43bb91986e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add <code>value</code> to stat.  <a href="#aacba55860e7c76d6c54ffd43bb91986e">More...</a><br /></td></tr>
<tr class="separator:aacba55860e7c76d6c54ffd43bb91986e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80b60e2631f212154546ec5bdbf45da0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a80b60e2631f212154546ec5bdbf45da0">observe_sample</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a> <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>, std::function&lt; void(boost::circular_buffer&lt; <a class="el" href="classrai_1_1stat__datapoint.html">stat_datapoint</a> &gt; &amp;)&gt; observer)</td></tr>
<tr class="memdesc:a80b60e2631f212154546ec5bdbf45da0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a sampling observer for a given counter.  <a href="#a80b60e2631f212154546ec5bdbf45da0">More...</a><br /></td></tr>
<tr class="separator:a80b60e2631f212154546ec5bdbf45da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1fd9322e64d600ca396c0d31b79ebf"><td class="memItemLeft" align="right" valign="top"><a id="a8a1fd9322e64d600ca396c0d31b79ebf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>observe_sample</b> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>, std::function&lt; void(boost::circular_buffer&lt; <a class="el" href="classrai_1_1stat__datapoint.html">stat_datapoint</a> &gt; &amp;)&gt; observer)</td></tr>
<tr class="separator:a8a1fd9322e64d600ca396c0d31b79ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2da24daf73ee4071425511ef23b78ee4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a2da24daf73ee4071425511ef23b78ee4">observe_count</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a> <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>, std::function&lt; void(uint64_t, uint64_t)&gt; observer)</td></tr>
<tr class="memdesc:a2da24daf73ee4071425511ef23b78ee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add count observer for a given type, detail and direction combination.  <a href="#a2da24daf73ee4071425511ef23b78ee4">More...</a><br /></td></tr>
<tr class="separator:a2da24daf73ee4071425511ef23b78ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf575bbaa67f308a8ead102cdcefb815"><td class="memItemLeft" align="right" valign="top"><a id="acf575bbaa67f308a8ead102cdcefb815"></a>
boost::circular_buffer&lt; <a class="el" href="classrai_1_1stat__datapoint.html">stat_datapoint</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#acf575bbaa67f308a8ead102cdcefb815">samples</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a> <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>)</td></tr>
<tr class="memdesc:acf575bbaa67f308a8ead102cdcefb815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a potentially empty list of the last N samples, where N is determined by the 'capacity' configuration. <br /></td></tr>
<tr class="separator:acf575bbaa67f308a8ead102cdcefb815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5922e41578484ca96fb1d89df86eeb83"><td class="memItemLeft" align="right" valign="top"><a id="a5922e41578484ca96fb1d89df86eeb83"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a5922e41578484ca96fb1d89df86eeb83">count</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>=stat::dir::in)</td></tr>
<tr class="memdesc:a5922e41578484ca96fb1d89df86eeb83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns current value for the given counter at the type level. <br /></td></tr>
<tr class="separator:a5922e41578484ca96fb1d89df86eeb83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c429d6e618e0773d6b870a2b2dd3bb8"><td class="memItemLeft" align="right" valign="top"><a id="a7c429d6e618e0773d6b870a2b2dd3bb8"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a7c429d6e618e0773d6b870a2b2dd3bb8">count</a> (<a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a> <a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">type</a>, <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a> <a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">detail</a>, <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a> <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">dir</a>=stat::dir::in)</td></tr>
<tr class="memdesc:a7c429d6e618e0773d6b870a2b2dd3bb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns current value for the given counter at the detail level. <br /></td></tr>
<tr class="separator:a7c429d6e618e0773d6b870a2b2dd3bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad19cebbad5a59e015ee571244f3946bb"><td class="memItemLeft" align="right" valign="top"><a id="ad19cebbad5a59e015ee571244f3946bb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#ad19cebbad5a59e015ee571244f3946bb">log_counters</a> (<a class="el" href="classrai_1_1stat__log__sink.html">stat_log_sink</a> &amp;sink)</td></tr>
<tr class="memdesc:ad19cebbad5a59e015ee571244f3946bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log counters to the given log link. <br /></td></tr>
<tr class="separator:ad19cebbad5a59e015ee571244f3946bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfdc283086d1f1026f883c5e82bf5042"><td class="memItemLeft" align="right" valign="top"><a id="acfdc283086d1f1026f883c5e82bf5042"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#acfdc283086d1f1026f883c5e82bf5042">log_samples</a> (<a class="el" href="classrai_1_1stat__log__sink.html">stat_log_sink</a> &amp;sink)</td></tr>
<tr class="memdesc:acfdc283086d1f1026f883c5e82bf5042"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log samples to the given log sink. <br /></td></tr>
<tr class="separator:acfdc283086d1f1026f883c5e82bf5042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4351f7f13202a46a6b82f3bcafbd44"><td class="memItemLeft" align="right" valign="top"><a id="acd4351f7f13202a46a6b82f3bcafbd44"></a>
std::unique_ptr&lt; <a class="el" href="classrai_1_1stat__log__sink.html">stat_log_sink</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#acd4351f7f13202a46a6b82f3bcafbd44">log_sink_json</a> ()</td></tr>
<tr class="memdesc:acd4351f7f13202a46a6b82f3bcafbd44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new JSON log sink. <br /></td></tr>
<tr class="separator:acd4351f7f13202a46a6b82f3bcafbd44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfbcbc21cf9918723d3cca5383408f0"><td class="memItemLeft" align="right" valign="top"><a id="a7dfbcbc21cf9918723d3cca5383408f0"></a>
std::unique_ptr&lt; <a class="el" href="classrai_1_1stat__log__sink.html">stat_log_sink</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrai_1_1stat.html#a7dfbcbc21cf9918723d3cca5383408f0">log_sink_file</a> (std::string filename)</td></tr>
<tr class="memdesc:a7dfbcbc21cf9918723d3cca5383408f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new file log sink. <br /></td></tr>
<tr class="separator:a7dfbcbc21cf9918723d3cca5383408f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Collects counts and samples for inbound and outbound traffic, blocks, errors, and so on. </p>
<p>Stats can be queried and observed on a type level (such as message and ledger) as well as a more specific detail level (such as send blocks) </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a213857cdb04c1739ea756f080f9edaf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a213857cdb04c1739ea756f080f9edaf0">&#9670;&nbsp;</a></span>dir</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">rai::stat::dir</a> : uint8_t</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Direction of the stat. </p>
<p>If the direction is irrelevant, use in </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6f170d53cfc3c96f374121bb5e124189"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f170d53cfc3c96f374121bb5e124189">&#9670;&nbsp;</a></span>stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rai::stat::stat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat__config.html">rai::stat_config</a>&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize stats with a config. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Configuration object; deserialized from config.json </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aacba55860e7c76d6c54ffd43bb91986e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacba55860e7c76d6c54ffd43bb91986e">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rai::stat::add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a>&#160;</td>
          <td class="paramname"><em>detail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a>&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>detail_only</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add <code>value</code> to stat. </p>
<p>If sampling is configured, this will update the current sample and call any sample observers if the interval is over.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Main statistics type </td></tr>
    <tr><td class="paramname">detail</td><td>Detail type, or detail::none to register on type-level only </td></tr>
    <tr><td class="paramname">dir</td><td>Direction </td></tr>
    <tr><td class="paramname">value</td><td>The amount to add </td></tr>
    <tr><td class="paramname">detail_only</td><td>If true, only update the detail-level counter </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2bd9edb50492e5436578677cf74ddb4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bd9edb50492e5436578677cf74ddb4c">&#9670;&nbsp;</a></span>configure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rai::stat::configure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a>&#160;</td>
          <td class="paramname"><em>detail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a>&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call this to override the default sample interval and capacity, for a specific stat entry. </p>
<p>This must be called before any stat entries are added, as part of the node initialiation. </p>

</div>
</div>
<a id="a2da24daf73ee4071425511ef23b78ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2da24daf73ee4071425511ef23b78ee4">&#9670;&nbsp;</a></span>observe_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rai::stat::observe_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a>&#160;</td>
          <td class="paramname"><em>detail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a>&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(uint64_t, uint64_t)&gt;&#160;</td>
          <td class="paramname"><em>observer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add count observer for a given type, detail and direction combination. </p>
<p>The observer receives old and new value. To avoid recursion, the observer callback must only use the received counts, not query the stat object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">observer</td><td>The observer receives the old and the new count. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a80b60e2631f212154546ec5bdbf45da0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80b60e2631f212154546ec5bdbf45da0">&#9670;&nbsp;</a></span>observe_sample()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rai::stat::observe_sample </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a2ddb7ead8dc0ac2f0e88d8a38cb1d6b0">stat::type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a9358b94c987fffcb6e52f996035ea3c4">stat::detail</a>&#160;</td>
          <td class="paramname"><em>detail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrai_1_1stat.html#a213857cdb04c1739ea756f080f9edaf0">stat::dir</a>&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(boost::circular_buffer&lt; <a class="el" href="classrai_1_1stat__datapoint.html">stat_datapoint</a> &gt; &amp;)&gt;&#160;</td>
          <td class="paramname"><em>observer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a sampling observer for a given counter. </p>
<p>The observer receives a snapshot of the current sampling. Accessing the sample buffer is thus thread safe. To avoid recursion, the observer callback must only use the received data point snapshop, not query the stat object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">observer</td><td>The observer receives a snapshot of the current samples. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rai/node/<a class="el" href="stats_8hpp_source.html">stats.hpp</a></li>
<li>rai/node/stats.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
